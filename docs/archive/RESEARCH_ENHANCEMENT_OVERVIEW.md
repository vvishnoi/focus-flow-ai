# Eye-Gaze Research Enhancement - Overview

## 🎯 What This Enhancement Adds

This enhancement transforms FocusFlow AI from a basic eye-tracking game into a **clinically-validated, evidence-based attention training system** backed by peer-reviewed research.

## 📚 Research Foundation

### Papers Integrated
1. **PMC3925117**: Eye Gaze in Autism Spectrum Disorder
   - Atypical gaze patterns as early indicators
   - Fixation duration and saccade metrics
   - Social attention measurement

2. **PMC10123036**: Eye-Tracking Technology in Healthcare
   - Objective, quantifiable attention data
   - Cognitive load measurement
   - Clinical applications

3. **Healthline**: Eye Gazing Benefits
   - Emotional regulation
   - Social connection
   - Focus training
   - Anxiety reduction

## 🏗️ Architecture Overview

```
┌─────────────────────────────────────────────────────────┐
│                    FocusFlow AI                          │
│                                                          │
│  ┌────────────────┐  ┌──────────────────────────────┐  │
│  │  Game Levels   │  │  Clinical Metrics Dashboard  │  │
│  │  1. Follow     │  │  - Fixation Analysis         │  │
│  │  2. Collision  │  │  - Saccade Performance       │  │
│  │  3. Pattern    │  │  - Attention Distribution    │  │
│  │  4. Social ⭐  │  │  - Progress Tracking         │  │
│  └────────────────┘  └──────────────────────────────┘  │
└─────────────────────────────────────────────────────────┘
                          ↓
┌─────────────────────────────────────────────────────────┐
│              AWS Bedrock Knowledge Base                  │
│                                                          │
│  ┌──────────────┐  ┌──────────────┐  ┌──────────────┐  │
│  │ Research     │→ │ Vector       │→ │ Bedrock      │  │
│  │ Papers (S3)  │  │ Embeddings   │  │ Agent        │  │
│  └──────────────┘  └──────────────┘  └──────────────┘  │
│                                                          │
│  Provides: Evidence-based insights with citations       │
└─────────────────────────────────────────────────────────┘
```

## ✨ Key Features

### 1. AWS Bedrock Knowledge Base
- **What**: Semantic search over research papers
- **How**: Vector embeddings of research documents
- **Benefit**: AI can cite specific research findings

### 2. Bedrock Agent with Research Context
- **What**: AI agent that queries research
- **How**: Connected to Knowledge Base
- **Benefit**: Evidence-based insights with citations

### 3. Enhanced Clinical Metrics
- **Fixation Metrics**: Duration, rate, distribution
- **Saccade Metrics**: Velocity, amplitude, accuracy
- **Attention Distribution**: Target vs distractor time
- **Cognitive Load**: Pupil size, blink rate
- **Benchmarks**: Age-appropriate comparisons

### 4. Clinical Metrics Dashboard
- **Charts**: Line, bar, scatter, pie, heatmap
- **Benchmarks**: Research-based typical ranges
- **Citations**: Links to source research
- **Progress**: Trend analysis over time

### 5. Level 4: Social Attention Training ⭐
- **Face Detection**: Find faces among objects
- **Eye Contact**: Maintain gaze on eyes
- **Emotion Recognition**: Identify expressions
- **Gaze Following**: Follow where person looks

### 6. Research-Backed Reports
- **AI Insights**: Generated by Bedrock Agent
- **Citations**: Specific papers and findings
- **Recommendations**: Evidence-based strategies
- **Benchmarks**: Comparison to research norms

## 📊 Enhanced Data Structure

### Before (Basic)
```json
{
  "metrics": {
    "totalGazePoints": 1800,
    "accurateGazes": 1540,
    "accuracyPercentage": 85.56
  }
}
```

### After (Clinical)
```json
{
  "clinicalMetrics": {
    "fixationMetrics": {
      "averageDuration": 250,
      "totalFixations": 120,
      "fixationRate": 2.0
    },
    "saccadeMetrics": {
      "averageVelocity": 300,
      "averageAmplitude": 5.2,
      "saccadeAccuracy": 92.5
    },
    "attentionDistribution": {
      "targetTime": 75,
      "distractorTime": 15,
      "backgroundTime": 10
    },
    "benchmarkComparison": {
      "ageGroup": "6-8",
      "percentile": 65,
      "status": "typical",
      "citation": "PMC3925117"
    }
  },
  "aiInsights": {
    "summary": "Strong sustained attention with typical fixation patterns...",
    "citations": [
      {
        "title": "Eye Gaze in Autism Spectrum Disorder",
        "finding": "Fixation duration of 250ms is within typical range for age 8",
        "source": "PMC3925117"
      }
    ],
    "recommendations": [
      "Continue Level 1 exercises to maintain attention span",
      "Introduce Level 4 for social attention training"
    ]
  }
}
```

## 🚀 Implementation Phases

### Phase 1: Knowledge Base (Weeks 1-2)
- Set up S3 bucket
- Upload research papers
- Create Bedrock Knowledge Base
- Test semantic search

### Phase 2: Bedrock Agent (Weeks 2-3)
- Create agent
- Connect to Knowledge Base
- Configure instructions
- Test with sample queries

### Phase 3: Clinical Metrics (Weeks 3-4)
- Implement calculations
- Add benchmark comparisons
- Update game tracking
- Test accuracy

### Phase 4: Dashboard (Weeks 4-5)
- Build UI components
- Create charts
- Add citations
- Test visualizations

### Phase 5: Level 4 (Weeks 5-6)
- Design exercises
- Implement face tracking
- Add social attention metrics
- Test with users

### Phase 6: Integration (Week 6)
- Connect all components
- End-to-end testing
- Documentation
- Deployment

## 💰 Cost Considerations

### AWS Bedrock Costs
- **Knowledge Base**: ~$0.10 per 1000 documents indexed
- **Embeddings**: ~$0.0001 per 1000 tokens
- **Agent Invocations**: ~$0.003 per 1000 input tokens, ~$0.015 per 1000 output tokens
- **OpenSearch Serverless**: ~$700/month (can use S3-only option for lower cost)

### Estimated Monthly Cost (1000 users, 10 sessions each)
- Knowledge Base: ~$1
- Embeddings: ~$5
- Agent Invocations: ~$50
- OpenSearch (optional): ~$700 or $0 (S3-only)

**Total: ~$56/month (S3-only) or ~$756/month (with OpenSearch)**

## 📈 Benefits

### For Therapists
- ✅ **Evidence-Based**: All insights backed by research
- ✅ **Clinical Metrics**: Research-validated measurements
- ✅ **Credible Reports**: Citations to peer-reviewed studies
- ✅ **Benchmarks**: Compare to typical development
- ✅ **Actionable**: Specific, research-backed recommendations

### For Patients
- ✅ **Validated Exercises**: Based on clinical research
- ✅ **Targeted Training**: Exercises for specific needs
- ✅ **Progress Tracking**: Meaningful, measurable improvements
- ✅ **Social Skills**: New Level 4 for social attention

### For the System
- ✅ **Differentiation**: Unique, research-backed approach
- ✅ **Credibility**: Grounded in peer-reviewed science
- ✅ **Scalability**: Knowledge base grows with new research
- ✅ **Quality**: AI insights are evidence-based

## 🎯 Success Metrics

### Technical
- Knowledge Base contains 10+ research papers
- Agent response time < 3 seconds
- Citation accuracy > 95%
- Metrics calculation accuracy > 99%

### Clinical
- Metrics match research definitions
- Benchmarks based on peer-reviewed norms
- Reports include specific citations
- Recommendations are evidence-based

### User
- Therapists can trace recommendations to research
- Dashboard is intuitive and informative
- Level 4 exercises are engaging
- Progress is clearly visualized

## 📚 Next Steps

### 1. Review the Spec
- Read `.kiro/specs/eye-gaze-research-enhancement/requirements.md`
- Review `.kiro/specs/eye-gaze-research-enhancement/design.md`
- Check `.kiro/specs/eye-gaze-research-enhancement/tasks.md`

### 2. Start Implementation
- Begin with Task 1: Knowledge Base setup
- Follow the task list sequentially
- Test each component thoroughly

### 3. Gather Research
- Download the 3 research papers
- Extract key findings and metrics
- Prepare for Knowledge Base upload

### 4. Deploy Infrastructure
- Set up AWS Bedrock in your region
- Create necessary IAM roles
- Deploy Terraform changes

## 🔗 Resources

### Research Papers
1. https://pmc.ncbi.nlm.nih.gov/articles/PMC3925117/pdf/nihms3881.pdf
2. https://pmc.ncbi.nlm.nih.gov/articles/PMC10123036/
3. https://www.healthline.com/health/eye-gazing

### AWS Documentation
- [Bedrock Knowledge Base](https://docs.aws.amazon.com/bedrock/latest/userguide/knowledge-base.html)
- [Bedrock Agents](https://docs.aws.amazon.com/bedrock/latest/userguide/agents.html)
- [OpenSearch Serverless](https://docs.aws.amazon.com/opensearch-service/latest/developerguide/serverless.html)

### Clinical Resources
- Eye-tracking metrics definitions
- Developmental benchmarks
- Attention assessment frameworks

---

## 🎉 Summary

This enhancement transforms FocusFlow AI into a **clinically-validated, evidence-based system** that:

1. ✅ Grounds AI insights in peer-reviewed research
2. ✅ Measures clinically-meaningful metrics
3. ✅ Provides research-backed recommendations
4. ✅ Includes new social attention training (Level 4)
5. ✅ Visualizes progress with research benchmarks
6. ✅ Cites specific studies and findings

**The result**: A professional, credible, evidence-based attention training system that therapists can trust and patients can benefit from.

---

**Ready to start? Begin with Task 1: Set Up AWS Bedrock Knowledge Base Infrastructure!** 🚀
